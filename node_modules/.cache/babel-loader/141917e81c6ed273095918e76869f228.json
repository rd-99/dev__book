{"ast":null,"code":"import _slicedToArray from\"C:/Users/Acer/Desktop/dev__book/dev__book/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useRef}from\"react\";import MDEditor from\"@uiw/react-md-editor\";import'./text-editor.css';import{useActions}from\"../hooks/use-actions\";import{jsx as _jsx}from\"react/jsx-runtime\";var TextEditor=function TextEditor(_ref){var cell=_ref.cell;var ref=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),editing=_useState2[0],setEditing=_useState2[1];var _useActions=useActions(),updateCell=_useActions.updateCell;useEffect(function(){var listener=function listener(event){if(ref.current&&event.target&&ref.current.contains(event.target)){return;}setEditing(false);};document.addEventListener('click',listener,{capture:true});return function(){document.removeEventListener('click',listener,{capture:true});};},[]);if(editing){return/*#__PURE__*/_jsx(\"div\",{className:\"text-editor\",ref:ref,children:/*#__PURE__*/_jsx(MDEditor,{value:cell.content,onChange:function onChange(v){return updateCell(cell.id,v||'');}})});}return/*#__PURE__*/_jsx(\"div\",{className:\"text-editor card\",onClick:function onClick(){return setEditing(true);},children:/*#__PURE__*/_jsx(\"div\",{className:\"card-content\",children:/*#__PURE__*/_jsx(MDEditor.Markdown,{source:cell.content||'Click to edit'})})});};export default TextEditor;","map":{"version":3,"names":["useState","useEffect","useRef","MDEditor","useActions","jsx","_jsx","TextEditor","_ref","cell","ref","_useState","_useState2","_slicedToArray","editing","setEditing","_useActions","updateCell","listener","event","current","target","contains","document","addEventListener","capture","removeEventListener","className","children","value","content","onChange","v","id","onClick","Markdown","source"],"sources":["C:/Users/Acer/Desktop/dev__book/dev__book/src/components/text-editor.tsx"],"sourcesContent":["import { useState , useEffect ,useRef} from \"react\";\r\nimport  MDEditor from \"@uiw/react-md-editor\";\r\nimport './text-editor.css';\r\nimport { Cell } from \"../state\";\r\nimport { useActions } from \"../hooks/use-actions\";\r\n\r\ninterface TextEditorProps{\r\n    cell:Cell ;\r\n}\r\nconst TextEditor: React.FC<TextEditorProps> = ({cell}) => {\r\n    const ref = useRef<HTMLDivElement | null>(null);\r\n    const [editing, setEditing] = useState(false);\r\n    const { updateCell} = useActions();\r\n\r\n    useEffect( () => {\r\n            \r\n        const listener = (event: MouseEvent) => {\r\n            if(ref.current &&\r\n                 event.target && \r\n                 ref.current.contains(event.target as Node)){\r\n                    return;\r\n            }            \r\n            setEditing(false);\r\n\r\n        };\r\n        document.addEventListener('click' , listener, {capture: true} );\r\n\r\n        return () => {\r\n            document.removeEventListener('click' , listener,  {capture: true}); \r\n        }\r\n    }, []);\r\n\r\n    if(editing) {\r\n        return (\r\n            <div className=\"text-editor\" ref={ref}>\r\n                <MDEditor value= {cell.content} onChange={(v) => updateCell(cell.id , v || '')}/>\r\n            </div>\r\n                            \r\n\r\n        );\r\n    }\r\n\r\n    return(\r\n        <div className=\"text-editor card\" onClick={() => setEditing(true)}>\r\n            <div className=\"card-content\">\r\n            <MDEditor.Markdown  source={cell.content || 'Click to edit'} />\r\n            </div>      \r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TextEditor;"],"mappings":"+HAAA,OAASA,QAAQ,CAAGC,SAAS,CAAEC,MAAM,KAAO,OAAO,CACnD,MAAQ,CAAAC,QAAQ,KAAM,sBAAsB,CAC5C,MAAO,mBAAmB,CAE1B,OAASC,UAAU,KAAQ,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAKlD,GAAM,CAAAC,UAAqC,CAAG,QAAxC,CAAAA,UAAqCA,CAAAC,IAAA,CAAe,IAAV,CAAAC,IAAI,CAAAD,IAAA,CAAJC,IAAI,CAChD,GAAM,CAAAC,GAAG,CAAGR,MAAM,CAAwB,IAAI,CAAC,CAC/C,IAAAS,SAAA,CAA8BX,QAAQ,CAAC,KAAK,CAAC,CAAAY,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAtCG,OAAO,CAAAF,UAAA,IAAEG,UAAU,CAAAH,UAAA,IAC1B,IAAAI,WAAA,CAAsBZ,UAAU,CAAC,CAAC,CAA1Ba,UAAU,CAAAD,WAAA,CAAVC,UAAU,CAElBhB,SAAS,CAAE,UAAM,CAEb,GAAM,CAAAiB,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAIC,KAAiB,CAAK,CACpC,GAAGT,GAAG,CAACU,OAAO,EACTD,KAAK,CAACE,MAAM,EACZX,GAAG,CAACU,OAAO,CAACE,QAAQ,CAACH,KAAK,CAACE,MAAc,CAAC,CAAC,CACxC,OACR,CACAN,UAAU,CAAC,KAAK,CAAC,CAErB,CAAC,CACDQ,QAAQ,CAACC,gBAAgB,CAAC,OAAO,CAAGN,QAAQ,CAAE,CAACO,OAAO,CAAE,IAAI,CAAE,CAAC,CAE/D,MAAO,WAAM,CACTF,QAAQ,CAACG,mBAAmB,CAAC,OAAO,CAAGR,QAAQ,CAAG,CAACO,OAAO,CAAE,IAAI,CAAC,CAAC,CACtE,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN,GAAGX,OAAO,CAAE,CACR,mBACIR,IAAA,QAAKqB,SAAS,CAAC,aAAa,CAACjB,GAAG,CAAEA,GAAI,CAAAkB,QAAA,cAClCtB,IAAA,CAACH,QAAQ,EAAC0B,KAAK,CAAGpB,IAAI,CAACqB,OAAQ,CAACC,QAAQ,CAAE,SAAAA,SAACC,CAAC,QAAK,CAAAf,UAAU,CAACR,IAAI,CAACwB,EAAE,CAAGD,CAAC,EAAI,EAAE,CAAC,EAAC,CAAC,CAAC,CAChF,CAAC,CAId,CAEA,mBACI1B,IAAA,QAAKqB,SAAS,CAAC,kBAAkB,CAACO,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAnB,UAAU,CAAC,IAAI,CAAC,EAAC,CAAAa,QAAA,cAC9DtB,IAAA,QAAKqB,SAAS,CAAC,cAAc,CAAAC,QAAA,cAC7BtB,IAAA,CAACH,QAAQ,CAACgC,QAAQ,EAAEC,MAAM,CAAE3B,IAAI,CAACqB,OAAO,EAAI,eAAgB,CAAE,CAAC,CAC1D,CAAC,CAEL,CAAC,CAEd,CAAC,CAED,cAAe,CAAAvB,UAAU"},"metadata":{},"sourceType":"module"}