{"ast":null,"code":"import { ActionType } from \"../action-types\";\nimport { saveCells } from \"../action-creators\";\nexport const persistMiddleware = _ref => {\n  let {\n    dispatch,\n    getState\n  } = _ref;\n  return next => {\n    return action => {\n      next(action);\n      let timer;\n      if ([ActionType.MOVE_CELL, ActionType.UPDATE_CELL, ActionType.INSERT_CELL_AFTER, ActionType.DELETE_CELL].includes(action.type)) {\n        if (timer) {\n          clearTimeout(timer);\n        }\n        timer = setTimeout(() => {\n          saveCells()(dispatch, getState);\n        }, 250);\n      }\n    };\n  };\n};","map":{"version":3,"names":["ActionType","saveCells","persistMiddleware","_ref","dispatch","getState","next","action","timer","MOVE_CELL","UPDATE_CELL","INSERT_CELL_AFTER","DELETE_CELL","includes","type","clearTimeout","setTimeout"],"sources":["C:/Users/Acer/Desktop/dev__book/dev__book/src/state/middlewares/persist-middleware.ts"],"sourcesContent":["import { Dispatch } from \"redux\";\r\nimport { Action } from \"../actions\";\r\nimport { ActionType } from \"../action-types\";\r\nimport { saveCells } from \"../action-creators\";\r\nimport { RootState } from \"../reducers\";\r\n\r\nexport const persistMiddleware = ({ dispatch , getState}: \r\n    { dispatch: Dispatch<Action>; getState : () => RootState;\r\n    }) => {\r\n        \r\n    return (next: (action: Action) => void) => {\r\n        return (action: Action) => {\r\n            next(action); \r\n            let timer:any;        \r\n        if(\r\n            [ActionType.MOVE_CELL ,\r\n                ActionType.UPDATE_CELL,\r\n                ActionType.INSERT_CELL_AFTER,\r\n                ActionType.DELETE_CELL].includes(action.type)\r\n                ){\r\n                    if(timer){\r\n                        clearTimeout(timer);\r\n                    }\r\n                    timer = setTimeout(()=> {\r\n                        saveCells()(dispatch, getState);\r\n                    },250);\r\n                }        \r\n        };\r\n    };\r\n};"],"mappings":"AAEA,SAASA,UAAU,QAAQ,iBAAiB;AAC5C,SAASC,SAAS,QAAQ,oBAAoB;AAG9C,OAAO,MAAMC,iBAAiB,GAAGC,IAAA,IAEvB;EAAA,IAFwB;IAAEC,QAAQ;IAAGC;EAE3C,CAAC,GAAAF,IAAA;EAED,OAAQG,IAA8B,IAAK;IACvC,OAAQC,MAAc,IAAK;MACvBD,IAAI,CAACC,MAAM,CAAC;MACZ,IAAIC,KAAS;MACjB,IACI,CAACR,UAAU,CAACS,SAAS,EACjBT,UAAU,CAACU,WAAW,EACtBV,UAAU,CAACW,iBAAiB,EAC5BX,UAAU,CAACY,WAAW,CAAC,CAACC,QAAQ,CAACN,MAAM,CAACO,IAAI,CAAC,EAC5C;QACG,IAAGN,KAAK,EAAC;UACLO,YAAY,CAACP,KAAK,CAAC;QACvB;QACAA,KAAK,GAAGQ,UAAU,CAAC,MAAK;UACpBf,SAAS,CAAC,CAAC,CAACG,QAAQ,EAAEC,QAAQ,CAAC;QACnC,CAAC,EAAC,GAAG,CAAC;MACV;IACR,CAAC;EACL,CAAC;AACL,CAAC"},"metadata":{},"sourceType":"module"}