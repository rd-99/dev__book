{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Acer/Desktop/dev__book/dev__book/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Acer/Desktop/dev__book/dev__book/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{ActionType}from\"../action-types\";import axios from\"axios\";import bundle from\"../../bundler\";export var saveCells=function saveCells(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch,getState){var _getState,_getState$cells,data,order,cells;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_getState=getState(),_getState$cells=_getState.cells,data=_getState$cells.data,order=_getState$cells.order;cells=order.map(function(id){return data[id];});_context.prev=2;_context.next=5;return axios.post('/cells',{cells:cells});case 5:_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](2);if(_context.t0 instanceof Error){dispatch({type:ActionType.SAVE_CELLS_ERROR,payload:_context.t0.message});}case 10:case\"end\":return _context.stop();}},_callee,null,[[2,7]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};export var updateCell=function updateCell(id,content){return{type:ActionType.UPDATE_CELL,payload:{id:id,content:content}};};export var include_cell_global=function include_cell_global(id,isOn){return{type:ActionType.INCLUDE_CELL_GLOBAL,payload:{id:id,isOn:isOn}};};export var deleteCell=function deleteCell(id){return{type:ActionType.DELETE_CELL,payload:id};};export var moveCell=function moveCell(id,direction){return{type:ActionType.MOVE_CELL,payload:{id:id,direction:direction}};};export var insertCellAfter=function insertCellAfter(id,cellType){return{type:ActionType.INSERT_CELL_AFTER,payload:{id:id,type:cellType}};};export var createBundle=function createBundle(cellId,input){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:dispatch({type:ActionType.BUNDLE_START,payload:{cellId:cellId,input:input}});_context2.next=3;return bundle(input);case 3:result=_context2.sent;dispatch({type:ActionType.BUNDLE_COMPLETE,payload:{cellId:cellId,bundle:result}});case 5:case\"end\":return _context2.stop();}},_callee2);}));return function(_x3){return _ref2.apply(this,arguments);};}();};export var fetchCells=function fetchCells(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:dispatch({type:ActionType.FETCH_CELLS});_context3.prev=1;_context3.next=4;return axios.get('/cells');case 4:_yield$axios$get=_context3.sent;data=_yield$axios$get.data;dispatch({type:ActionType.FETCH_CELLS_COMPLETE,payload:data});_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](1);if(_context3.t0 instanceof Error){dispatch({type:ActionType.FETCH_CELLS_ERROR,payload:_context3.t0.message});}case 12:case\"end\":return _context3.stop();}},_callee3,null,[[1,9]]);}));return function(_x4){return _ref3.apply(this,arguments);};}();};","map":{"version":3,"names":["ActionType","axios","bundle","saveCells","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dispatch","getState","_getState","_getState$cells","data","order","cells","wrap","_callee$","_context","prev","next","map","id","post","t0","Error","type","SAVE_CELLS_ERROR","payload","message","stop","_x","_x2","apply","arguments","updateCell","content","UPDATE_CELL","include_cell_global","isOn","INCLUDE_CELL_GLOBAL","deleteCell","DELETE_CELL","moveCell","direction","MOVE_CELL","insertCellAfter","cellType","INSERT_CELL_AFTER","createBundle","cellId","input","_ref2","_callee2","result","_callee2$","_context2","BUNDLE_START","sent","BUNDLE_COMPLETE","_x3","fetchCells","_ref3","_callee3","_yield$axios$get","_callee3$","_context3","FETCH_CELLS","get","FETCH_CELLS_COMPLETE","FETCH_CELLS_ERROR","_x4"],"sources":["C:/Users/Acer/Desktop/dev__book/dev__book/src/state/action-creators/index.ts"],"sourcesContent":["import { Dispatch } from \"redux\";\r\nimport { ActionType } from \"../action-types\";\r\nimport axios from \"axios\";\r\nimport { Action ,\r\n        UpdateCellAction ,\r\n        DeleteCellAction ,\r\n        InsertCellAfterAction ,\r\n        INCLUDE_CELL_GLOBAL,\r\n        MoveCellAction,\r\n         Direction,\r\n        } from \"../actions\";\r\nimport { Cell, CellTypes } from \"../cell\";\r\nimport bundle from \"../../bundler\";\r\nimport { RootState } from \"..\";\r\n\r\nexport const saveCells = () => {\r\n    return async (dispatch: Dispatch<Action> , getState: () => RootState) => {\r\n        const { cells: {data, order }  } = getState();\r\n        const cells : Cell[] = order.map(id => data[id]);\r\n        try {\r\n            await axios.post('/cells' , { cells });\r\n        } catch (err) {\r\n            if(err instanceof Error){\r\n                dispatch({\r\n                type: ActionType.SAVE_CELLS_ERROR,\r\n                payload: err.message,\r\n                }\r\n            );}\r\n        }\r\n    }    \r\n}\r\n\r\nexport const updateCell = (id: string , content : string) : UpdateCellAction => {\r\n    return {\r\n        type: ActionType.UPDATE_CELL,\r\n        payload: {\r\n            id,\r\n            content,\r\n        },\r\n    };\r\n};\r\nexport const include_cell_global = (id: string , isOn : boolean) : INCLUDE_CELL_GLOBAL => {\r\n    return {\r\n        type: ActionType.INCLUDE_CELL_GLOBAL,\r\n        payload: { id , isOn }  \r\n    };\r\n};\r\n\r\nexport const deleteCell = (id:string) : DeleteCellAction => {\r\n    return {\r\n        type: ActionType.DELETE_CELL,\r\n        payload:id\r\n    };\r\n    };\r\n    \r\nexport const moveCell = (id: string , direction: Direction) : MoveCellAction=> {\r\n    return {\r\n        type: ActionType.MOVE_CELL,\r\n        payload: {\r\n            id,\r\n            direction\r\n        }\r\n    };\r\n};\r\nexport const insertCellAfter = (id: string | null, cellType: CellTypes) : InsertCellAfterAction => {\r\n    return {\r\n        type: ActionType.INSERT_CELL_AFTER,\r\n        payload: {\r\n            id,\r\n            type : cellType,\r\n        },\r\n    };\r\n};\r\n\r\nexport const createBundle = (cellId: string , input: string) => {\r\n    return async (dispatch: Dispatch<Action>) => {\r\n        dispatch({\r\n            type:ActionType.BUNDLE_START,\r\n            payload: {\r\n                cellId,      \r\n                input          \r\n            },\r\n        });\r\n\r\n        const result = await bundle(input);\r\n\r\n        dispatch({\r\n            type: ActionType.BUNDLE_COMPLETE,\r\n            payload: {\r\n                cellId,\r\n                bundle: result\r\n            }\r\n        })\r\n    };\r\n};\r\n\r\nexport const fetchCells = () => {\r\n    return async (dispatch : Dispatch<Action>) => {\r\n        dispatch({ type: ActionType.FETCH_CELLS});\r\n\r\n        try {\r\n            const {data} : {data: Cell[]} = await axios.get('/cells');\r\n            dispatch({\r\n                type: ActionType.FETCH_CELLS_COMPLETE,\r\n                payload: data\r\n            });\r\n            \r\n        } catch (err) {\r\n            if(err instanceof Error){dispatch({\r\n                type: ActionType.FETCH_CELLS_ERROR,\r\n                payload: err.message\r\n            });\r\n        }\r\n        }\r\n\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}