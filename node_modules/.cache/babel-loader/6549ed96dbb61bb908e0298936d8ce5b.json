{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport React from 'react';\nimport classnames from 'classnames';\nimport Child from './Child';\nimport \"./index.css\";\nexport default function Toolbar() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var prefixCls = props.prefixCls,\n    _props$commands = props.commands,\n    commands = _props$commands === void 0 ? [] : _props$commands,\n    _props$commandHelp = props.commandHelp,\n    commandHelp = _props$commandHelp === void 0 ? {} : _props$commandHelp,\n    active = props.active,\n    groupName = props.groupName;\n  function handleClick(command, name) {\n    var onCommand = props.onCommand;\n    onCommand && onCommand(command, groupName || name);\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-toolbar\")\n  }, /*#__PURE__*/React.createElement(\"ul\", null, commands.map(function (item, idx) {\n    if (item.keyCommand === 'divider') {\n      return /*#__PURE__*/React.createElement(\"li\", _extends({\n        key: idx\n      }, item.liProps, {\n        className: \"\".concat(prefixCls, \"-toolbar-divider\")\n      }));\n    }\n    if (!item.keyCommand) return;\n    var activeBtn = active && (item.value ? active[item.keyCommand] && active[item.keyCommand] === item.value : active[item.keyCommand]);\n    var childNode = typeof item.children === 'function' ? item.children(_objectSpread({\n      close: function close() {\n        return handleClick({}, item.groupName);\n      },\n      execute: function execute() {\n        return handleClick({\n          execute: item.execute\n        });\n      }\n    }, commandHelp)) : undefined;\n    return /*#__PURE__*/React.createElement(\"li\", _extends({\n      key: idx\n    }, item.liProps, {\n      className: classnames({\n        active: activeBtn\n      })\n    }), !item.buttonProps && item.icon, item.buttonProps && /*#__PURE__*/React.createElement('button', _objectSpread(_objectSpread({\n      type: 'button',\n      disabled: active && active.preview && active.preview === 'preview' && !/(preview|fullscreen)/.test(item.keyCommand),\n      'data-name': item.name\n    }, item.buttonProps), {}, {\n      onClick: function onClick(evn) {\n        evn.stopPropagation();\n        handleClick(item, item.groupName);\n      }\n    }), item.icon), item.children && /*#__PURE__*/React.createElement(Child, {\n      active: active,\n      groupName: item.groupName,\n      prefixCls: prefixCls,\n      onCommand: props.onCommand,\n      children: childNode,\n      commands: Array.isArray(item.children) && typeof item.children !== 'function' ? item.children : undefined\n    }));\n  })));\n}\n;","map":{"version":3,"names":["React","classnames","Child","Toolbar","props","arguments","length","undefined","prefixCls","_props$commands","commands","_props$commandHelp","commandHelp","active","groupName","handleClick","command","name","onCommand","createElement","className","concat","map","item","idx","keyCommand","_extends","key","liProps","activeBtn","value","childNode","children","_objectSpread","close","execute","buttonProps","icon","type","disabled","preview","test","onClick","evn","stopPropagation","Array","isArray"],"sources":["../../../../src/components/Toolbar/index.tsx"],"sourcesContent":["import React from 'react';\nimport classnames from 'classnames';\nimport { IProps } from '../../utils';\nimport { ICommand, ICommandChildHandleParam } from '../../commands';\nimport Child from './Child';\nimport './index.less';\n\nexport interface IToolbarProps extends IProps {\n  onCommand?: (command: ICommand<string>, groupName?: string) => void;\n  commands?: ICommand<string>[];\n  groupName?: string;\n  commandHelp?: ICommandChildHandleParam;\n  active?: {\n    [key: string]: any,\n  },\n}\n\nexport default function Toolbar(props: IToolbarProps = {}) {\n  const { prefixCls, commands = [], commandHelp = {}, active, groupName } = props;\n  function handleClick(command: ICommand<string>, name?: string) {\n    const { onCommand } = props;\n    onCommand && onCommand(command, groupName || name);\n  }\n  return (\n    <div className={`${prefixCls}-toolbar`}>\n      <ul>\n        {commands.map((item, idx) => {\n          if (item.keyCommand === 'divider') {\n            return <li key={idx} {...item.liProps} className={`${prefixCls}-toolbar-divider`} />\n          }\n          if (!item.keyCommand) return;\n          const activeBtn = active && (item.value ? active[item.keyCommand] && active[item.keyCommand] === item.value : active[item.keyCommand]);\n\n          const childNode = typeof item.children === 'function'\n            ? item.children({\n              close: () => handleClick({ }, item.groupName),\n              execute: () => handleClick({ execute: item.execute }),\n              ...commandHelp,\n            })\n            : undefined;\n          return (\n            <li key={idx} {...item.liProps} className={classnames({ active: activeBtn })}>\n              {!item.buttonProps && item.icon}\n              {item.buttonProps && React.createElement('button', {\n                type: 'button',\n                disabled: active && active.preview && active.preview === 'preview' && !/(preview|fullscreen)/.test(item.keyCommand),\n                'data-name': item.name, ...item.buttonProps,\n                onClick: (evn: any) => {\n                  evn.stopPropagation()\n                  handleClick(item, item.groupName);\n                }\n              }, item.icon)}\n              {item.children && (\n                <Child\n                  active={active}\n                  groupName={item.groupName}\n                  prefixCls={prefixCls}\n                  onCommand={props.onCommand}\n                  children={childNode}\n                  commands={Array.isArray(item.children) && typeof item.children !== 'function' ? item.children : undefined}\n                />\n              )}\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}