{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Acer/Desktop/dev__book/dev__book/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Acer/Desktop/dev__book/dev__book/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useEffect}from'react';//import bundle from '../bundler';\nimport CodeEditor from'./code-editor';//import 'bulmaswatch/superhero/bulmaswatch.min.css';\nimport Preview from'./preview';import Resizable from'./resizable';import'./resizeable.css';import{useActions}from'../hooks/use-actions';import{useTypedSelector}from'../hooks/use-typed-selector';import'./code-cell.css';import{useCumulativeCode}from'../hooks/use-cumulative-code';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CodeCell=function CodeCell(_ref){var cell=_ref.cell;//const [input, setInput] = useState('');\n// const [code, setCode] = useState(''); \n// const [err, setErr] = useState('');\nvar _useActions=useActions(),updateCell=_useActions.updateCell,createBundle=_useActions.createBundle;var bundle=useTypedSelector(function(state){return state.bundles&&state.bundles[cell.id];});var cumulativeCode=useCumulativeCode(cell.id);useEffect(function(){if(!bundle){createBundle(cell.id,cumulativeCode);return;}var timer=setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0://const output = await bundle(cell.content);\n// setCode(output.code);\n// setErr(output.err);      \ncreateBundle(cell.id,cumulativeCode);case 1:case\"end\":return _context.stop();}},_callee);})),1000);return function(){clearTimeout(timer);};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[cumulativeCode,cell.id,createBundle]);//   const onClick = async () => {\n//     const output = await bundle(input);\n//     //console.log(output,input);\n//     setCode(output);\n//   };\nreturn/*#__PURE__*/_jsx(Resizable,{direction:\"vertical\",children:/*#__PURE__*/_jsxs(\"div\",{style:{height:'calc(100% - 10px)',display:'flex',flexDirection:'row'},children:[/*#__PURE__*/_jsx(Resizable,{direction:\"horizontal\",children:/*#__PURE__*/_jsx(CodeEditor,{initialValue:\"//@include\"//{cell.content}\n,onChange:function onChange(value){return updateCell(cell.id,value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-wrapper\",children:!bundle||bundle.loading?/*#__PURE__*/_jsx(\"div\",{className:\"progress-cover\",children:/*#__PURE__*/_jsx(\"progress\",{className:\"progress is-small is-primary\",max:\"100\",children:\"Loading\"})}):/*#__PURE__*/_jsx(Preview,{code:bundle.code,err:bundle.err})})]})});};export default CodeCell;","map":{"version":3,"names":["useEffect","CodeEditor","Preview","Resizable","useActions","useTypedSelector","useCumulativeCode","jsx","_jsx","jsxs","_jsxs","CodeCell","_ref","cell","_useActions","updateCell","createBundle","bundle","state","bundles","id","cumulativeCode","timer","setTimeout","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","stop","clearTimeout","direction","children","style","height","display","flexDirection","initialValue","onChange","value","className","loading","max","code","err"],"sources":["C:/Users/Acer/Desktop/dev__book/dev__book/src/components/code-cell.tsx"],"sourcesContent":["import { useEffect,} from 'react';\r\n//import bundle from '../bundler';\r\nimport CodeEditor from './code-editor';\r\n//import 'bulmaswatch/superhero/bulmaswatch.min.css';\r\nimport Preview from './preview';\r\nimport Resizable from './resizable';\r\nimport './resizeable.css';\r\nimport { Cell } from '../state';\r\nimport { useActions } from '../hooks/use-actions';\r\nimport { useTypedSelector } from '../hooks/use-typed-selector';\r\nimport './code-cell.css';\r\nimport { useCumulativeCode } from '../hooks/use-cumulative-code';\r\n\r\ninterface CodeCellProps{\r\n  cell: Cell\r\n}\r\nconst CodeCell:React.FC<CodeCellProps> = ({ cell }) => { \r\n  //const [input, setInput] = useState('');\r\n  // const [code, setCode] = useState(''); \r\n  // const [err, setErr] = useState('');\r\n  const { updateCell, createBundle } = useActions();\r\n  const bundle = useTypedSelector((state) => state.bundles && state.bundles[cell.id]);\r\n  const cumulativeCode = useCumulativeCode(cell.id);\r\n\r\n  useEffect(() => {\r\n          if(!bundle){\r\n            createBundle(cell.id , cumulativeCode);\r\n          return ;\r\n          }\r\n\r\n\r\n    const timer = setTimeout(async () => {\r\n        //const output = await bundle(cell.content);\r\n        // setCode(output.code);\r\n        // setErr(output.err);      \r\n        createBundle(cell.id, cumulativeCode)\r\n    },1000);\r\n    \r\n    return () => {\r\n        clearTimeout(timer);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [cumulativeCode , cell.id , createBundle]);\r\n\r\n//   const onClick = async () => {\r\n//     const output = await bundle(input);\r\n//     //console.log(output,input);\r\n//     setCode(output);\r\n//   };\r\n\r\n  return (\r\n    <Resizable direction = 'vertical'>\r\n        <div style={{height:'calc(100% - 10px)',\r\n                     display: 'flex',\r\n                      flexDirection: 'row' }}>\r\n                        \r\n            <Resizable direction = 'horizontal'>\r\n                <CodeEditor \r\n                initialValue= {`//@include`} //{cell.content}\r\n                onChange={(value) => updateCell(cell.id, value)}\r\n                />      \r\n      {/* <div><button onClick={onClick}>Submit</button></div> */}\r\n            </Resizable>\r\n            <div className='progress-wrapper'>\r\n            {\r\n              !bundle || bundle.loading\r\n              ? (<div className='progress-cover'>\r\n                <progress className= 'progress is-small is-primary' max=\"100\">\r\n                Loading\r\n                </progress>             \r\n              </div>)\r\n              : (<Preview code={bundle.code} err = {bundle.err} />)\r\n            }\r\n            </div>               \r\n        </div>\r\n    </Resizable>\r\n    \r\n  );\r\n};\r\n\r\nexport default CodeCell;"],"mappings":"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"},"metadata":{},"sourceType":"module"}