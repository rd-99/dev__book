{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Acer\\\\Desktop\\\\dev__book\\\\dev__book\\\\src\\\\components\\\\preview.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef } from 'react';\nimport './preview.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst html = `\n<html>\n<head>\n    <style>html { background-color: white; }</style> \n</head>\n<body>\n  <div id=\"root\"></div>\n  <script>\n  const handleError = (err) => {\n    const root = document.querySelector('#root');\n      root.innerHTML = '<div style=\"color: red;\"><h4>Runtime Error</h4>' + err + '</div>';\n      console.error(err);\n  };\nwindow.addEventListener('error' , (event) =>{\n  event.preventDefault();\n  handleError(event.error);\n})\n\n  window.addEventListener('message',(event) => {\n    try {\n      eval(event.data);\n    } catch (err) {\n      handleError(err); \n    }\n  }, false);\n  </script>\n  </body>\n  </html>\n`;\nconst Preview = _ref => {\n  _s();\n  let {\n    code,\n    err\n  } = _ref;\n  const iframe = useRef();\n  useEffect(() => {\n    iframe.current.srcdoc = html;\n    setTimeout(() => {\n      iframe.current.contentWindow.postMessage(code, '*');\n    }, 50);\n  }, [code]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"preview-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"iframe\", {\n      style: {\n        backgroundColor: 'white'\n      } //pointerEvents: 'none'\n      ,\n      title: \"preview\",\n      ref: iframe,\n      sandbox: \"allow-scripts\",\n      srcDoc: html\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this), err && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"preview-error\",\n      children: err\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 15\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n_s(Preview, \"GAFleWBZ6O+8Op7dBuDH6PzOglQ=\");\n_c = Preview;\nexport default Preview;\nvar _c;\n$RefreshReg$(_c, \"Preview\");","map":{"version":3,"names":["useEffect","useRef","jsxDEV","_jsxDEV","html","Preview","_ref","_s","code","err","iframe","current","srcdoc","setTimeout","contentWindow","postMessage","className","children","style","backgroundColor","title","ref","sandbox","srcDoc","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Acer/Desktop/dev__book/dev__book/src/components/preview.tsx"],"sourcesContent":["import {useEffect, useRef} from 'react';\r\nimport './preview.css';\r\ninterface PreviewProps {\r\n    code: string;\r\n    err : string;\r\n}\r\n\r\nconst html = `\r\n<html>\r\n<head>\r\n    <style>html { background-color: white; }</style> \r\n</head>\r\n<body>\r\n  <div id=\"root\"></div>\r\n  <script>\r\n  const handleError = (err) => {\r\n    const root = document.querySelector('#root');\r\n      root.innerHTML = '<div style=\"color: red;\"><h4>Runtime Error</h4>' + err + '</div>';\r\n      console.error(err);\r\n  };\r\nwindow.addEventListener('error' , (event) =>{\r\n  event.preventDefault();\r\n  handleError(event.error);\r\n})\r\n\r\n  window.addEventListener('message',(event) => {\r\n    try {\r\n      eval(event.data);\r\n    } catch (err) {\r\n      handleError(err); \r\n    }\r\n  }, false);\r\n  </script>\r\n  </body>\r\n  </html>\r\n`;\r\n\r\nconst Preview: React.FC<PreviewProps> = ({code , err}) => {\r\n    const iframe = useRef<any>();\r\n\r\n    useEffect(() => {\r\n        iframe.current.srcdoc = html;\r\n        setTimeout(() => {\r\n          iframe.current.contentWindow.postMessage(code, '*');\r\n        },50);\r\n    }, [code]);\r\n\r\n    return (\r\n    <div className='preview-wrapper'>\r\n        <iframe\r\n    style={{backgroundColor: 'white'}} //pointerEvents: 'none'\r\n     title = 'preview'\r\n      ref = {iframe} \r\n      sandbox=\"allow-scripts\" \r\n      srcDoc= {html}\r\n      /> \r\n      {err && <div className='preview-error'>{err}</div>}\r\n      \r\n    </div>\r\n    );\r\n};\r\n\r\nexport default Preview;"],"mappings":";;AAAA,SAAQA,SAAS,EAAEC,MAAM,QAAO,OAAO;AACvC,OAAO,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAMvB,MAAMC,IAAI,GAAI;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMC,OAA+B,GAAGC,IAAA,IAAkB;EAAAC,EAAA;EAAA,IAAjB;IAACC,IAAI;IAAGC;EAAG,CAAC,GAAAH,IAAA;EACjD,MAAMI,MAAM,GAAGT,MAAM,CAAM,CAAC;EAE5BD,SAAS,CAAC,MAAM;IACZU,MAAM,CAACC,OAAO,CAACC,MAAM,GAAGR,IAAI;IAC5BS,UAAU,CAAC,MAAM;MACfH,MAAM,CAACC,OAAO,CAACG,aAAa,CAACC,WAAW,CAACP,IAAI,EAAE,GAAG,CAAC;IACrD,CAAC,EAAC,EAAE,CAAC;EACT,CAAC,EAAE,CAACA,IAAI,CAAC,CAAC;EAEV,oBACAL,OAAA;IAAKa,SAAS,EAAC,iBAAiB;IAAAC,QAAA,gBAC5Bd,OAAA;MACJe,KAAK,EAAE;QAACC,eAAe,EAAE;MAAO,CAAE,CAAC;MAAA;MAClCC,KAAK,EAAG,SAAS;MAChBC,GAAG,EAAIX,MAAO;MACdY,OAAO,EAAC,eAAe;MACvBC,MAAM,EAAGnB;IAAK;MAAAoB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACb,CAAC,EACDlB,GAAG,iBAAIN,OAAA;MAAKa,SAAS,EAAC,eAAe;MAAAC,QAAA,EAAER;IAAG;MAAAe,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAE/C,CAAC;AAEV,CAAC;AAACpB,EAAA,CAvBIF,OAA+B;AAAAuB,EAAA,GAA/BvB,OAA+B;AAyBrC,eAAeA,OAAO;AAAC,IAAAuB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module"}