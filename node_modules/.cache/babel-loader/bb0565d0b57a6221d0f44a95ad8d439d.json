{"ast":null,"code":"import MonacoEditor from'@monaco-editor/react';import prettier from'prettier';import parser from'prettier/parser-babel';import{useRef}from'react';import'./code-editor.css';import codeShift from'jscodeshift';import Highlighter from'monaco-jsx-highlighter';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CodeEditor=function CodeEditor(_ref){var onChange=_ref.onChange,initialValue=_ref.initialValue;var editorRef=useRef();var onEditorDidMount=function onEditorDidMount(getValue,MonacoEditor){var _MonacoEditor$getMode;editorRef.current=MonacoEditor;MonacoEditor.onDidChangeModelContent(function(){onChange(getValue());});(_MonacoEditor$getMode=MonacoEditor.getModel())===null||_MonacoEditor$getMode===void 0?void 0:_MonacoEditor$getMode.updateOptions({tabSize:2});var highlighter=new Highlighter(// @ts-ignore\nwindow.monaco,codeShift,MonacoEditor);highlighter.highLightOnDidChangeModelContent(function(){},function(){},undefined,function(){});};var onFormatClick=function onFormatClick(){var unformatted=editorRef.current.getModel().getValue();var formatted=prettier.format(unformatted,{parser:'babel',plugins:[parser],useTabs:false,semi:true,singleQuote:true}).replace(/\\n$/,'');editorRef.current.setValue(formatted);};return/*#__PURE__*/_jsxs(\"div\",{className:\"editor-wrapper\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button button-format is-primary is-small \",onClick:onFormatClick,children:\"Format\"}),/*#__PURE__*/_jsx(MonacoEditor,{editorDidMount:onEditorDidMount,value:initialValue,height:\"100%\",theme:\"dark\",language:\"javascript\",options:{wordWrap:'on',minimap:{enabled:false},showUnused:false,folding:false,lineNumbersMinChars:3,fontSize:16,scrollBeyondLastLine:false,automaticLayout:true}})]});};export default CodeEditor;","map":{"version":3,"names":["MonacoEditor","prettier","parser","useRef","codeShift","Highlighter","jsx","_jsx","jsxs","_jsxs","CodeEditor","_ref","onChange","initialValue","editorRef","onEditorDidMount","getValue","_MonacoEditor$getMode","current","onDidChangeModelContent","getModel","updateOptions","tabSize","highlighter","window","monaco","highLightOnDidChangeModelContent","undefined","onFormatClick","unformatted","formatted","format","plugins","useTabs","semi","singleQuote","replace","setValue","className","children","onClick","editorDidMount","value","height","theme","language","options","wordWrap","minimap","enabled","showUnused","folding","lineNumbersMinChars","fontSize","scrollBeyondLastLine","automaticLayout"],"sources":["C:/Users/Acer/Desktop/dev__book/dev__book/src/components/code-editor.tsx"],"sourcesContent":["import MonacoEditor, {EditorDidMount} from '@monaco-editor/react';\r\nimport prettier from 'prettier';\r\nimport parser from 'prettier/parser-babel';\r\nimport  {useRef} from 'react';\r\nimport './code-editor.css';\r\nimport codeShift from 'jscodeshift';\r\nimport Highlighter from 'monaco-jsx-highlighter';\r\n\r\n\r\ninterface CodeEditorProps {\r\n    initialValue: string;\r\n    onChange(value:string) : void;\r\n}\r\nconst CodeEditor:React.FC<CodeEditorProps> = ({ onChange , initialValue }) => {\r\n\r\n    const editorRef = useRef<any>();\r\n    const onEditorDidMount: EditorDidMount = (getValue , MonacoEditor ) => {\r\n        editorRef.current = MonacoEditor;        \r\n        MonacoEditor.onDidChangeModelContent(() => {\r\n            onChange(getValue());\r\n        });\r\n        MonacoEditor.getModel()?.updateOptions({ tabSize: 2});\r\n\r\n        const highlighter = new Highlighter(\r\n            // @ts-ignore\r\n            window.monaco,\r\n            codeShift,\r\n            MonacoEditor\r\n            );\r\n        highlighter.highLightOnDidChangeModelContent(\r\n            () => {},\r\n            () => {},\r\n            undefined,\r\n            () => {}\r\n        );\r\n               \r\n    };\r\n\r\n    const onFormatClick = () => {\r\n        const unformatted =editorRef.current.getModel().getValue();\r\n\r\n        const formatted = prettier.format(unformatted,{\r\n            parser: 'babel',\r\n            plugins:[parser],\r\n            useTabs: false,\r\n            semi: true,\r\n            singleQuote: true,\r\n        }).replace(/\\n$/,'');\r\n        editorRef.current.setValue(formatted);\r\n    };\r\n    return(\r\n    <div className='editor-wrapper'>\r\n        <button className='button button-format is-primary is-small ' onClick={onFormatClick}>Format</button>\r\n    <MonacoEditor\r\n            editorDidMount={onEditorDidMount}\r\n            value= { initialValue } \r\n            height ='100%'\r\n            theme = \"dark\"\r\n            language='javascript'\r\n            options={{\r\n                wordWrap: 'on',\r\n                minimap : {enabled : false},\r\n                showUnused:false,\r\n                folding:false,\r\n                lineNumbersMinChars:3,\r\n                fontSize: 16,\r\n                scrollBeyondLastLine:false,\r\n                automaticLayout:true\r\n             }}\r\n             />\r\n    </div>\r\n    )\r\n};\r\n\r\nexport default CodeEditor;"],"mappings":"AAAA,MAAO,CAAAA,YAAY,KAAwB,sBAAsB,CACjE,MAAO,CAAAC,QAAQ,KAAM,UAAU,CAC/B,MAAO,CAAAC,MAAM,KAAM,uBAAuB,CAC1C,OAASC,MAAM,KAAO,OAAO,CAC7B,MAAO,mBAAmB,CAC1B,MAAO,CAAAC,SAAS,KAAM,aAAa,CACnC,MAAO,CAAAC,WAAW,KAAM,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAOjD,GAAM,CAAAC,UAAoC,CAAG,QAAvC,CAAAA,UAAoCA,CAAAC,IAAA,CAAoC,IAA9B,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CAAGC,YAAY,CAAAF,IAAA,CAAZE,YAAY,CAEnE,GAAM,CAAAC,SAAS,CAAGX,MAAM,CAAM,CAAC,CAC/B,GAAM,CAAAY,gBAAgC,CAAG,QAAnC,CAAAA,gBAAgCA,CAAIC,QAAQ,CAAGhB,YAAY,CAAM,KAAAiB,qBAAA,CACnEH,SAAS,CAACI,OAAO,CAAGlB,YAAY,CAChCA,YAAY,CAACmB,uBAAuB,CAAC,UAAM,CACvCP,QAAQ,CAACI,QAAQ,CAAC,CAAC,CAAC,CACxB,CAAC,CAAC,CACF,CAAAC,qBAAA,CAAAjB,YAAY,CAACoB,QAAQ,CAAC,CAAC,UAAAH,qBAAA,iBAAvBA,qBAAA,CAAyBI,aAAa,CAAC,CAAEC,OAAO,CAAE,CAAC,CAAC,CAAC,CAErD,GAAM,CAAAC,WAAW,CAAG,GAAI,CAAAlB,WAAW,CAC/B;AACAmB,MAAM,CAACC,MAAM,CACbrB,SAAS,CACTJ,YACA,CAAC,CACLuB,WAAW,CAACG,gCAAgC,CACxC,UAAM,CAAC,CAAC,CACR,UAAM,CAAC,CAAC,CACRC,SAAS,CACT,UAAM,CAAC,CACX,CAAC,CAEL,CAAC,CAED,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,CACxB,GAAM,CAAAC,WAAW,CAAEf,SAAS,CAACI,OAAO,CAACE,QAAQ,CAAC,CAAC,CAACJ,QAAQ,CAAC,CAAC,CAE1D,GAAM,CAAAc,SAAS,CAAG7B,QAAQ,CAAC8B,MAAM,CAACF,WAAW,CAAC,CAC1C3B,MAAM,CAAE,OAAO,CACf8B,OAAO,CAAC,CAAC9B,MAAM,CAAC,CAChB+B,OAAO,CAAE,KAAK,CACdC,IAAI,CAAE,IAAI,CACVC,WAAW,CAAE,IACjB,CAAC,CAAC,CAACC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,CACpBtB,SAAS,CAACI,OAAO,CAACmB,QAAQ,CAACP,SAAS,CAAC,CACzC,CAAC,CACD,mBACArB,KAAA,QAAK6B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC3BhC,IAAA,WAAQ+B,SAAS,CAAC,2CAA2C,CAACE,OAAO,CAAEZ,aAAc,CAAAW,QAAA,CAAC,QAAM,CAAQ,CAAC,cACzGhC,IAAA,CAACP,YAAY,EACLyC,cAAc,CAAE1B,gBAAiB,CACjC2B,KAAK,CAAI7B,YAAc,CACvB8B,MAAM,CAAE,MAAM,CACdC,KAAK,CAAG,MAAM,CACdC,QAAQ,CAAC,YAAY,CACrBC,OAAO,CAAE,CACLC,QAAQ,CAAE,IAAI,CACdC,OAAO,CAAG,CAACC,OAAO,CAAG,KAAK,CAAC,CAC3BC,UAAU,CAAC,KAAK,CAChBC,OAAO,CAAC,KAAK,CACbC,mBAAmB,CAAC,CAAC,CACrBC,QAAQ,CAAE,EAAE,CACZC,oBAAoB,CAAC,KAAK,CAC1BC,eAAe,CAAC,IACnB,CAAE,CACD,CAAC,EACN,CAAC,CAEV,CAAC,CAED,cAAe,CAAA7C,UAAU"},"metadata":{},"sourceType":"module"}