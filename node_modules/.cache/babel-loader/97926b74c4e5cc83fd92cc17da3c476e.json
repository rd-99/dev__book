{"ast":null,"code":"import{useEffect,useRef}from'react';import'./preview.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var html=\"\\n<html>\\n<head>\\n    <style>html { background-color: white; }</style> \\n</head>\\n<body>\\n  <div id=\\\"root\\\"></div>\\n  <script>\\n  const handleError = (err) => {\\n    const root = document.querySelector('#root');\\n      root.innerHTML = '<div style=\\\"color: red;\\\"><h4>Runtime Error</h4>' + err + '</div>';\\n      console.error(err);\\n  };\\nwindow.addEventListener('error' , (event) =>{\\n  event.preventDefault();\\n  handleError(event.error);\\n})\\n\\n  window.addEventListener('message',(event) => {\\n    try {\\n      eval(event.data);\\n    } catch (err) {\\n      handleError(err); \\n    }\\n  }, false);\\n  </script>\\n  </body>\\n  </html>\\n\";var Preview=function Preview(_ref){var code=_ref.code,err=_ref.err;var iframe=useRef();useEffect(function(){iframe.current.srcdoc=html;setTimeout(function(){iframe.current.contentWindow.postMessage(code,'*');},50);},[code]);return/*#__PURE__*/_jsxs(\"div\",{className:\"preview-wrapper\",children:[/*#__PURE__*/_jsx(\"iframe\",{style:{backgroundColor:'white'}//pointerEvents: 'none'\n,title:\"preview\",ref:iframe,sandbox:\"allow-scripts\",srcDoc:html}),err&&/*#__PURE__*/_jsx(\"div\",{className:\"preview-error\",children:err})]});};export default Preview;","map":{"version":3,"names":["useEffect","useRef","jsx","_jsx","jsxs","_jsxs","html","Preview","_ref","code","err","iframe","current","srcdoc","setTimeout","contentWindow","postMessage","className","children","style","backgroundColor","title","ref","sandbox","srcDoc"],"sources":["C:/Users/Acer/Desktop/dev__book/dev__book/src/components/preview.tsx"],"sourcesContent":["import {useEffect, useRef} from 'react';\r\nimport './preview.css';\r\ninterface PreviewProps {\r\n    code: string;\r\n    err : string;\r\n}\r\n\r\nconst html = `\r\n<html>\r\n<head>\r\n    <style>html { background-color: white; }</style> \r\n</head>\r\n<body>\r\n  <div id=\"root\"></div>\r\n  <script>\r\n  const handleError = (err) => {\r\n    const root = document.querySelector('#root');\r\n      root.innerHTML = '<div style=\"color: red;\"><h4>Runtime Error</h4>' + err + '</div>';\r\n      console.error(err);\r\n  };\r\nwindow.addEventListener('error' , (event) =>{\r\n  event.preventDefault();\r\n  handleError(event.error);\r\n})\r\n\r\n  window.addEventListener('message',(event) => {\r\n    try {\r\n      eval(event.data);\r\n    } catch (err) {\r\n      handleError(err); \r\n    }\r\n  }, false);\r\n  </script>\r\n  </body>\r\n  </html>\r\n`;\r\n\r\nconst Preview: React.FC<PreviewProps> = ({code , err}) => {\r\n    const iframe = useRef<any>();\r\n\r\n    useEffect(() => {\r\n        iframe.current.srcdoc = html;\r\n        setTimeout(() => {\r\n          iframe.current.contentWindow.postMessage(code, '*');\r\n        },50);\r\n    }, [code]);\r\n\r\n    return (\r\n    <div className='preview-wrapper'>\r\n        <iframe\r\n    style={{backgroundColor: 'white'}} //pointerEvents: 'none'\r\n     title = 'preview'\r\n      ref = {iframe} \r\n      sandbox=\"allow-scripts\" \r\n      srcDoc= {html}\r\n      /> \r\n      {err && <div className='preview-error'>{err}</div>}\r\n      \r\n    </div>\r\n    );\r\n};\r\n\r\nexport default Preview;"],"mappings":"AAAA,OAAQA,SAAS,CAAEC,MAAM,KAAO,OAAO,CACvC,MAAO,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAMvB,GAAM,CAAAC,IAAI,koBA4BT,CAED,GAAM,CAAAC,OAA+B,CAAG,QAAlC,CAAAA,OAA+BA,CAAAC,IAAA,CAAqB,IAAhB,CAAAC,IAAI,CAAAD,IAAA,CAAJC,IAAI,CAAGC,GAAG,CAAAF,IAAA,CAAHE,GAAG,CAChD,GAAM,CAAAC,MAAM,CAAGV,MAAM,CAAM,CAAC,CAE5BD,SAAS,CAAC,UAAM,CACZW,MAAM,CAACC,OAAO,CAACC,MAAM,CAAGP,IAAI,CAC5BQ,UAAU,CAAC,UAAM,CACfH,MAAM,CAACC,OAAO,CAACG,aAAa,CAACC,WAAW,CAACP,IAAI,CAAE,GAAG,CAAC,CACrD,CAAC,CAAC,EAAE,CAAC,CACT,CAAC,CAAE,CAACA,IAAI,CAAC,CAAC,CAEV,mBACAJ,KAAA,QAAKY,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC5Bf,IAAA,WACJgB,KAAK,CAAE,CAACC,eAAe,CAAE,OAAO,CAAG;AAAA,CAClCC,KAAK,CAAG,SAAS,CAChBC,GAAG,CAAIX,MAAO,CACdY,OAAO,CAAC,eAAe,CACvBC,MAAM,CAAGlB,IAAK,CACb,CAAC,CACDI,GAAG,eAAIP,IAAA,QAAKc,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAER,GAAG,CAAM,CAAC,EAE/C,CAAC,CAEV,CAAC,CAED,cAAe,CAAAH,OAAO"},"metadata":{},"sourceType":"module"}